<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="UTF-8">
    <title>ChunkIt by hilarudeens</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="../stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="../stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="../stylesheets/github-light.css" media="screen">
    <!-- Demo Page Specific Header Links -->
    <style type="text/css">
    ul.grid {
        padding: 0px;
    }
    
    ul.grid li {
        list-style: none;
        display: block;
        border: 0px solid #CCC;
        float: left;
        line-height: 0px;
    }
    
    #imageGrid1 li {
        cursor: move;
    }
    
    .ui-draggable-dragging {
        z-index: 9999;
    }
    </style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script src="http://code.jquery.com/ui/1.8.20/jquery-ui.min.js" type="text/javascript"></script>
    <script src=" https://cdn.rawgit.com/yeco/jquery-ui-touch-punch/master/jquery.ui.touch-punch.min.js" type="text/javascript"></script>
   
    <script src="https://cdn.rawgit.com/hilarudeens/ChunkIt/master/jquery.chunkIt.js"></script>
    <script type="text/javascript">
    (function() {
        function swapNodes(a, b) {
            var aparent = a.parentNode;
            var asibling = a.nextSibling === b ? a : a.nextSibling;
            b.parentNode.insertBefore(a, b);
            aparent.insertBefore(b, asibling);
        }

        function splitimage() {
            var $grid;
            $('#imageGrid1').chunkIt({
                maxContainerWidth: 300,
                cellsInRow: 3, // Number of cells in grid row.
                cellsInColumn: 3,
                shuffle: true, // Number of cells in grid column.
                scaleImage: true,
                onGetGridElem: function($event, currentObj, $gridElem) {
                    // Callback function will be executed on generating grid's DOM element.
                    $gridElem.width($gridElem.width() + 50 //For borders adjustment
                    );
                    $grid = $gridElem.hide();
                },
                onAfterFinish: function($event, chunkItObj) {
                    // Initiating sortable plugin here
                    $("#imageGrid1 li").draggable({
                        revert: true,
                        revertDuration: 0,
                        cursor: "move"
                    }).droppable({
                        drop: function(event, ui) {
                            swapNodes($(this).get(0), $(ui.draggable).get(0));
                            $("#imageGrid1 li").each(function(index, elem) {

                                if ('cell_' + (index + 1) !== $(elem).attr('id')) {
                                    return false;
                                } else if ($("#imageGrid1 li").length === index + 1) {
                                    setTimeout(function(){alert("Hey! You win the game"); },0);
                                    
                                }
                            });
                        }
                    });
                    $grid.fadeIn();

                }
            });

        }
        $(function() {
            var setupGame = function() {
                splitimage();
                $('#click').append('Please drag and drop after loading game...');
            };

            // On click and replace.
            $("#click").one('click', setupGame);
        });

    })();
    </script>
</head>

<body>
    <section class="page-header">
        <h1 class="project-name">ChunkIt</h1>
        <h2 class="project-tagline">Crop, Extract, De-sprite and Play</h2>
        <a href="https://github.com/hilarudeens/ChunkIt" class="btn">View on GitHub</a>
        <a href="https://github.com/hilarudeens/ChunkIt/zipball/master" class="btn">Download .zip</a>
        <a href="https://github.com/hilarudeens/ChunkIt/tarball/master" class="btn">Download .tar.gz</a>
    </section>
    <section class="main-content">
        <h2>
<a id="welcome-words" class="anchor" href="#welcome-words" aria-hidden="true"><span class="octicon octicon-link"></span></a>Demo</h2>
        <p>Begin by click Start Game</p>
        <div id="replace">
            <h2>Swap Game</h2>
            <div id="imageGrid1" data-chunkit-imgurl="images/up.jpg"><img src="images/up.jpg" width="300px" /></div>
            <br/>
            <div style="clear:both;"></div>
            <br/>
        </div>
        </div>
        <div id="click">
            <a class="btn" style="color:#000; border:1px solid #ccc;">Start Game</a>
            <p class="helper" style="display:none;">
        </div>
        <div>
            <pre>
<code>
(function() {
    function swapNodes(a, b) {
        var aparent = a.parentNode;
        var asibling = a.nextSibling === b ? a : a.nextSibling;
        b.parentNode.insertBefore(a, b);
        aparent.insertBefore(b, asibling);
    }

    function splitimage() {
        var $grid;
        $('#imageGrid1').chunkIt({
            maxContainerWidth: 400,
            cellsInRow: 3, // Number of cells in grid row.
            cellsInColumn: 3,
            shuffle: true, // Number of cells in grid column.
            scaleImage: true,
            onGetGridElem: function($event, currentObj, $gridElem) {
                // Callback function will be executed on generating grid's DOM element.
                $gridElem.width($gridElem.width() + 50 //For borders adjustment
                );
                $grid = $gridElem.hide();
            },
            onAfterFinish: function($event, chunkItObj) {
                // Initiating sortable plugin here
                $("#imageGrid1 li").draggable({
                    revert: true,
                    revertDuration: 0,
                    cursor: "move"
                }).droppable({
                    drop: function(event, ui) {
                        swapNodes($(this).get(0), $(ui.draggable).get(0));
                        $("#imageGrid1 li").each(function(index, elem) {

                            if ('cell_' + (index + 1) !== $(elem).attr('id')) {
                                return false;
                            } else if ($("#imageGrid1 li").length === index + 1) {
                                setTimeout(function(){alert("Hey! You win the game"); },0);
                                
                            }
                        });
                    }
                });
                $grid.fadeIn();

            }
        });

    }
    $(function() {
        var setupGame = function() {
            splitimage();
            $('#click').append('Please drag and drop after loading game...');
        };

        // On click and replace.
        $("#click").one('click', setupGame);
    });

})();
</code>
            </pre>
        </div>
        <footer class="site-footer">
            <span class="site-footer-owner"><a href="https://github.com/hilarudeens/ChunkIt">ChunkIt</a> is maintained by <a href="https://github.com/hilarudeens">hilarudeens</a>.</span>
            <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
        </footer>
    </section>
</body>

</html>